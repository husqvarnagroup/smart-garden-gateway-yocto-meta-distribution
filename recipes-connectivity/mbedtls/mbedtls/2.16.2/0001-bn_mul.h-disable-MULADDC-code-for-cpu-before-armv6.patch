From f0f53a70fe88b38f8345fd9d2daa8cb2cca7d1ec Mon Sep 17 00:00:00 2001
From: Reto Schneider <code@reto-schneider.ch>
Date: Thu, 7 Nov 2019 00:20:15 +0000
Subject: [PATCH] bn_mul.h: disable MULADDC code for cpu before armv6

Source: https://github.com/ARMmbed/mbedtls/pull/2324
---
 include/mbedtls/bn_mul.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/include/mbedtls/bn_mul.h b/include/mbedtls/bn_mul.h
index c33bd8d4a..6dcfbf007 100644
--- a/include/mbedtls/bn_mul.h
+++ b/include/mbedtls/bn_mul.h
@@ -642,7 +642,8 @@
            "r6", "r7", "r8", "r9", "cc"         \
          );
 
-#elif defined (__ARM_FEATURE_DSP) && (__ARM_FEATURE_DSP == 1)
+#elif defined (__ARM_FEATURE_DSP) && (__ARM_FEATURE_DSP == 1) && \
+    (__ARM_ARCH >= 6)
 
 #define MULADDC_INIT                            \
     asm(
-- 
2.20.1

